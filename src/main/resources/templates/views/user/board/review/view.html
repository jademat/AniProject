<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/user/layout.html}">

<th:block layout:fragment="content">
    <main id="content">
        <h2>게시글 상세보기</h2>

        <table class="table table-bordered">
            <tr>
                <th>제목</th>
                <td th:text="${board.bdTitle}"></td> <!-- 제목 -->
            </tr>
            <tr>
                <th>작성자</th>
                <td th:text="${board.userId}"></td> <!-- 작성자 -->
            </tr>
            <tr>
                <th>작성일</th>
                <td th:text="${#temporals.format(board.bdRegdate, 'yyyy-MM-dd HH:mm:ss')}"></td> <!-- 날짜 포맷 -->
            </tr>
            <tr>
                <th>추천</th>
                <td th:text="${board.bdThumbs}"></td> <!-- 추천 수 -->
            </tr>
            <tr>
                <th>조회수</th>
                <td th:text="${board.bdViews}"></td> <!-- 조회수 -->
            </tr>
            <tr>
                <th>내용</th>
                <td>
                    <p th:text="${board.bdContents}"></p> <!-- 게시글 내용 -->
                </td>
            </tr>
        </table>

        <div class="text-end">
            <a href="/board/review/list" class="btn btn-secondary">목록</a>

            <!-- 로그인한 사용자만 수정/삭제 가능 -->
            <th:block th:if="${userId != null and userId == board.userId}">
                <a th:href="@{/board/review/edit/{bdNo}(bdNo=${board.bdNo})}" class="btn btn-warning">수정</a>
                <button type="button" class="btn btn-danger" id="deleteBtn">삭제</button>
            </th:block>
        </div>
    </main>
</th:block>

<th:block layout:fragment="script">
    <script>
        document.querySelector("#deleteBtn")?.addEventListener('click', () => {
            if (confirm("정말 삭제하시겠습니까?")) {
                let bdNo = "[[${board.bdNo}]]";
                location.href = "/board/review/delete/" + bdNo;
            }
        });
    </script>
</th:block>

</html>
